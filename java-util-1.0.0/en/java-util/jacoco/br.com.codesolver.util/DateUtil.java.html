<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DateUtil.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">java-util</a> &gt; <a href="index.source.html" class="el_package">br.com.codesolver.util</a> &gt; <span class="el_source">DateUtil.java</span></div><h1>DateUtil.java</h1><pre class="source lang-java linenums">package br.com.codesolver.util;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;
import java.util.HashMap;
import java.util.Locale;
import java.util.Map;

/**
 * Manipulação de Datas.
 *
 * @author &lt;a href=&quot;mailto:luciano@codesolver.com.br&quot;&gt;Luciano Vieira
 *         Rodrigues&lt;/a&gt;
 * @since 2025-08-26
 */
public final class DateUtil {

    /** Total de milisegundos em 1 segundo. */
    private static final int SECOND_IN_MILIS = 1000;

    /** Total de segundos em 1 minuto. */
    private static final int MINUTE_IN_SECONDS = 60;

    /** Total de minutos em 1 hora. */
    private static final int HOUR_IN_MINUTES = 60;

    /** Total de horas em 1 dia. */
    private static final int DAY_IN_HOURS = 24;

    /** Formatos reconhecidos de datas. */
<span class="fc" id="L34">    private static Map&lt;Locale, String&gt; dateFormats = null;</span>

    /** Formatos reconhecidos de datas e horas. */
<span class="fc" id="L37">    private static Map&lt;Locale, String&gt; dateTimeFormats = null;</span>

    /** Formato padrão para regiões desconhecias. */
    private static final String DEFAULT_DATE_FORMAT = &quot;dd/MM/yyyy&quot;;

    /** Formato padrão para regiões desconhecidas. */
    private static final String DEFAULT_DATE_TIME_FORMAT = &quot;dd/MM/yyyy HH:mm:ss&quot;;

    // Inicializando as configuraçãoes de data para Brasil e Estados Unidos.
    static {
<span class="fc" id="L47">        Locale.setDefault(Locale.of(&quot;pt&quot;, &quot;BR&quot;));</span>

<span class="fc" id="L49">        dateFormats = new HashMap&lt;Locale, String&gt;();</span>
<span class="fc" id="L50">        dateFormats.put(Locale.getDefault(), DEFAULT_DATE_FORMAT);</span>
<span class="fc" id="L51">        dateFormats.put(Locale.US, &quot;MM-dd-yyyy&quot;);</span>

<span class="fc" id="L53">        dateTimeFormats = new HashMap&lt;Locale, String&gt;();</span>
<span class="fc" id="L54">        dateTimeFormats.put(Locale.getDefault(), DEFAULT_DATE_TIME_FORMAT);</span>
<span class="fc" id="L55">        dateTimeFormats.put(Locale.US, &quot;MM-dd-yyyy hh:mm:ss a&quot;);</span>
<span class="fc" id="L56">    }</span>

    /** Construtor oculto. */
    private DateUtil() {
    }

    /**
     * Mapa de chave e valor contento as localizadas e seus formatos de data.
     *
     * @return Mapa de formatos.
     */
    private static Map&lt;Locale, String&gt; getDateFormats() {
<span class="fc" id="L68">        return dateFormats;</span>
    }

    /**
     * Mapa de chave valor contendo as localidades e seus formatos de data e hora.
     *
     * @return Mapa de formatos.
     */
    private static Map&lt;Locale, String&gt; getDateTimeFormats() {
<span class="fc" id="L77">        return dateTimeFormats;</span>
    }

    /**
     * Remove o horário de uma data.
     *
     * @param date {@link Date}.
     * @return {@link Date}.
     */
    public static Date truncate(Date date) {
<span class="fc" id="L87">        Date result = null;</span>
<span class="fc bfc" id="L88" title="All 2 branches covered.">        if (date != null) {</span>
<span class="fc" id="L89">            Calendar calendar = new GregorianCalendar();</span>
<span class="fc" id="L90">            calendar.setTime(date);</span>
<span class="fc" id="L91">            calendar.set(Calendar.HOUR, 0);</span>
<span class="fc" id="L92">            calendar.set(Calendar.MINUTE, 0);</span>
<span class="fc" id="L93">            calendar.set(Calendar.SECOND, 0);</span>
<span class="fc" id="L94">            calendar.set(Calendar.MILLISECOND, 0);</span>
<span class="fc" id="L95">            calendar.set(Calendar.AM_PM, Calendar.AM);</span>
<span class="fc" id="L96">            result = calendar.getTime();</span>
        }
<span class="fc" id="L98">        return result;</span>
    }

    /**
     * Adiciona dias em uma data informada.
     *
     * @param date  Data base.
     * @param value Dias para adicionar.
     * @return {@link Date}.
     */
    public static Date addDay(Date date, int value) {
<span class="fc" id="L109">        Calendar calendar = new GregorianCalendar();</span>
<span class="fc" id="L110">        calendar.setTime(date);</span>
<span class="fc" id="L111">        calendar.add(Calendar.DATE, value);</span>
<span class="fc" id="L112">        return calendar.getTime();</span>
    }

    /**
     * Transforma uma data em sua representação de caracteres para o idioma padrão.
     *
     * @param date {@link Date}.
     * @return Data no formato de texto, formatado para a localidade padrão.
     */
    public static String dateToString(Date date) {
<span class="fc" id="L122">        return dateToString(date, Locale.getDefault());</span>
    }

    /**
     * Transforma uma data em sua representação de caracteres pra o idioma
     * informado.
     *
     * @param date   {@link Date}.
     * @param locale {@link Locale}.
     * @return {@link String}.
     */
    public static String dateToString(Date date, Locale locale) {
<span class="fc" id="L134">        String dateFormat = getDateFormats().get(locale);</span>
<span class="fc bfc" id="L135" title="All 2 branches covered.">        if (dateFormat == null) {</span>
<span class="fc" id="L136">            dateFormat = DEFAULT_DATE_FORMAT;</span>
        }
<span class="fc" id="L138">        return new SimpleDateFormat(dateFormat).format(date);</span>
    }

    /**
     * Transforma um sequência de caracteres para uma data no idioma padrão.
     *
     * @param value Texto representando uma data.
     * @return {@link Date}.
     * @throws ParseException Não foi possível interpretar o valor.
     */
    public static Date stringToDate(String value) throws ParseException {
<span class="fc" id="L149">        return stringToDate(value, Locale.getDefault());</span>
    }

    /**
     * Transforma um sequência de caracteres para uma data no idioma informado.
     *
     * @param value  Texto representando uma data.
     * @param locale {@link Locale}.
     * @return {@link Date}.
     * @throws ParseException Não foi possível interpretar o valor.
     */
    public static Date stringToDate(String value, Locale locale) throws ParseException {
<span class="fc" id="L161">        String dateFormat = getDateFormats().get(locale);</span>
<span class="fc bfc" id="L162" title="All 2 branches covered.">        if (dateFormat == null) {</span>
<span class="fc" id="L163">            dateFormat = DEFAULT_DATE_FORMAT;</span>
        }
<span class="fc" id="L165">        return new SimpleDateFormat(dateFormat).parse(value);</span>
    }

    /**
     * Transforma uma data e hora em sua representação de caracteres para o idioma
     * padrão.
     *
     * @param date {@link Date}.
     * @return Data no formato de texto da localidade padrão.
     */
    public static String dateTimeToString(Date date) {
<span class="fc" id="L176">        return dateTimeToString(date, Locale.getDefault());</span>
    }

    /**
     * Transforma uma data e hora em sua representação de caracteres para o idioma
     * informado.
     *
     * @param date   {@link Date}.
     * @param locale {@link Locale}.
     * @return {@link String}.
     */
    public static String dateTimeToString(Date date, Locale locale) {
<span class="fc" id="L188">        String dateFormat = getDateTimeFormats().get(locale);</span>
<span class="fc bfc" id="L189" title="All 2 branches covered.">        if (dateFormat == null) {</span>
<span class="fc" id="L190">            dateFormat = DEFAULT_DATE_TIME_FORMAT;</span>
        }
<span class="fc" id="L192">        return new SimpleDateFormat(dateFormat).format(date);</span>
    }

    /**
     * Transforma uma representação de caracteres para uma data e hora no idioma
     * informado.
     *
     * @param value Representação em texto de uma data e hora.
     * @return {@link Date}.
     * @throws ParseException Não foi possível interpretar o valor.
     */
    public static Date stringToDateTime(String value) throws ParseException {
<span class="fc" id="L204">        return stringToDateTime(value, Locale.getDefault());</span>
    }

    /**
     * Transforma uma representação de caracteres para uma data e hora no idioma
     * informado.
     *
     * @param value  Representação em texto de uma data e hora.
     * @param locale {@link Locale}.
     * @return {@link Date}.
     * @throws ParseException Valor informado não pode ser interpretado.
     */
    public static Date stringToDateTime(String value, Locale locale) throws ParseException {
<span class="fc" id="L217">        String dateFormat = getDateTimeFormats().get(locale);</span>
<span class="fc bfc" id="L218" title="All 2 branches covered.">        if (dateFormat == null) {</span>
<span class="fc" id="L219">            dateFormat = DEFAULT_DATE_TIME_FORMAT;</span>
        }
<span class="fc" id="L221">        return new SimpleDateFormat(dateFormat).parse(value);</span>
    }

    /**
     * Verifica se uma data refere-se a um final de semana.
     *
     * @param date {@link Date}.
     * @return Verdadeiro ou false.
     */
    public static boolean isWeekend(Date date) {
<span class="fc" id="L231">        GregorianCalendar calendar = new GregorianCalendar();</span>
<span class="fc" id="L232">        calendar.setTime(date);</span>
<span class="fc bfc" id="L233" title="All 2 branches covered.">        return calendar.get(Calendar.DAY_OF_WEEK) == Calendar.SATURDAY</span>
<span class="fc bfc" id="L234" title="All 2 branches covered.">                || calendar.get(Calendar.DAY_OF_WEEK) == Calendar.SUNDAY;</span>
    }

    /**
     * Calcula a diferença de milisegundos entre duas datas, onde a data inicial
     * deve ser menor que a data final.
     *
     * @param begin  {@link Date} inicial.
     * @param finish {@link Date} final.
     * @return Diferença em milisegundos entre as datas.
     */
    public static long milisBetween(Date begin, Date finish) {
<span class="fc" id="L246">        long result = 0;</span>
<span class="fc bfc" id="L247" title="All 2 branches covered.">        if (begin.before(finish)) {</span>
<span class="fc" id="L248">            result = finish.getTime() - begin.getTime();</span>
        }
<span class="fc" id="L250">        return result;</span>
    }

    /**
     * Calcula a diferença de segundos entre duas datas, onde a data inicial
     * deve ser menor que a data final.
     *
     * @param begin  {@link Date} inicial.
     * @param finish {@link Date} final.
     * @return Diferença em segundos entre as datas.
     */
    public static long secondsBetween(Date begin, Date finish) {
<span class="fc" id="L262">        Calendar cbegin     = new GregorianCalendar();</span>
<span class="fc" id="L263">        Calendar cfinish    = new GregorianCalendar();</span>

<span class="fc" id="L265">        cbegin.setTime(begin);</span>
<span class="fc" id="L266">        cbegin.set(Calendar.MILLISECOND, 0);</span>
<span class="fc" id="L267">        cfinish.setTime(finish);</span>
<span class="fc" id="L268">        cfinish.set(Calendar.MILLISECOND, 0);</span>

<span class="fc" id="L270">        long difference = milisBetween(cbegin.getTime(), cfinish.getTime());</span>
<span class="fc" id="L271">        long result = 0;</span>
<span class="fc bfc" id="L272" title="All 2 branches covered.">        if (difference &gt;= SECOND_IN_MILIS) {</span>
<span class="fc" id="L273">            result = difference / SECOND_IN_MILIS;</span>
        }
<span class="fc" id="L275">        return result;</span>
    }

    /**
     * Calcula a diferença de minutos entre duas datas, onde a data inicial
     * deve ser menor que a data final.
     *
     * @param begin  {@link Date} inicial.
     * @param finish {@link Date} final.
     * @return Diferença em minutos entre as datas.
     */
    public static long minutesBetween(Date begin, Date finish) {
<span class="fc" id="L287">        long difference = secondsBetween(begin, finish);</span>
<span class="fc" id="L288">        long result = 0;</span>
<span class="fc bfc" id="L289" title="All 2 branches covered.">        if (difference &gt;= MINUTE_IN_SECONDS) {</span>
<span class="fc" id="L290">            result = difference / MINUTE_IN_SECONDS;</span>
        }
<span class="fc" id="L292">        return result;</span>
    }

    /**
     * Calcula a diferença de horas entre duas datas, onde a data inicial
     * deve ser menor que a data final.
     *
     * @param begin  {@link Date} inicial.
     * @param finish {@link Date} final.
     * @return Diferença em horas entre as datas.
     */
    public static long hoursBetween(Date begin, Date finish) {
<span class="fc" id="L304">        long difference = minutesBetween(begin, finish);</span>
<span class="fc" id="L305">        long result = 0;</span>
<span class="fc bfc" id="L306" title="All 2 branches covered.">        if (difference &gt;= HOUR_IN_MINUTES) {</span>
<span class="fc" id="L307">            result = difference / HOUR_IN_MINUTES;</span>
        }
<span class="fc" id="L309">        return result;</span>
    }

    /**
     * Calcula a diferença de dias entre duas datas, onde a data inicial
     * deve ser menor que a data final.
     *
     * @param begin  {@link Date} inicial.
     * @param finish {@link Date} final.
     * @return Diferença em dias entre as datas.
     */
    public static long daysBetween(Date begin, Date finish) {
<span class="fc" id="L321">        long difference = hoursBetween(begin, finish);</span>
<span class="fc" id="L322">        long result = 0;</span>
<span class="fc bfc" id="L323" title="All 2 branches covered.">        if (difference &gt;= DAY_IN_HOURS) {</span>
<span class="fc" id="L324">            result = difference / DAY_IN_HOURS;</span>
        }
<span class="fc" id="L326">        return result;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>